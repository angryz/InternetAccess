# QuantumultX配置自用DIY版
# @auther angryz
# @update 2022/08/23
#
# 参考:
# 0. https://www.notion.so/75156f1c053c46568672896145f2eb36
# 1. https://raw.githubusercontent.com/w37fhy/QuantumultX/master/QuantumultX_diy.conf
# 2. https://raw.githubusercontent.com/solikethis/QuantumultX-demo/master/SabrinaQuanxConf.conf
#
# 更新日志：
# 20220823 - 更新policy规则 和 filter_remote。1）匹配更多不同机场的节点命名；2）增加B站、电报、测速分流。

[general]
;dns exclusion list中的域名将不使用fake-ip方式. 其它域名则全部采用 fake-ip 及远程解析的模式
dns_exclusion_list=*.cmbchina.com, *.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn
;下列表中的内容将不经过 QuantumultX的处理
excluded_routes=10.0.0.0/8, 127.0.0.0/8, 169.254.0.0/16, 192.0.2.0/24, 192.168.0.0/16, 198.51.100.0/24, 224.0.0.0/4
;
network_check_url=http://cp.cloudflare.com/generate_204
;对 server_check_url 指定的网址进行相应测试，以确认节点的可用性
server_check_url=http://www.gstatic.com/generate_204
;资源解析器，可用于自定义各类远程资源的转换，如节点，规则 filter，复写 rewrite 等，url 地址可远程，可 本地/iCloud(Quantumult X/Scripts目录)
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
;geo_location_checker用于节点页面的信息展示，可完整自定义
geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://github.com/KOP-XIAO/QuantumultX/raw/master/Scripts/IP_API.js
#根据网络自动切换 分流/直连/全局代理 等模式. 第一个filter为4g模式开启规则分流，第二个filter为其他wifi下开启规则分流，第三个wifi1修改成你路由器翻墙的wifi名开启直连模式，第四个wifi2为你公司或者其他有路由器翻墙的WiFi名走全局代理）
running_mode_trigger=filter, filter, DARK_KNIGHT:all_direct, wifi2:all_proxy
#ssid_suspended_list: Quantumult X 将在你指定的 WiFi 下自动暂停工作
ssid_suspended_list=DARK_KNIGHT
;
;profile_img_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/img/dragonball/1.PNG

[dns]
no-ipv6
server=114.114.114.114
server=119.29.29.29
server=223.5.5.5
# 规定特定域名解析所使用的的DNS
server=/*.taobao.com/223.5.5.5
server=/*.tmall.com/223.5.5.5
server=/*.alipay.com/223.5.5.5
server=/*.alicdn.com/223.5.5.5
server=/*.aliyun.com/223.5.5.5
server=/*.jd.com/119.28.28.28
server=/*.qq.com/119.28.28.28
server=/*.tencent.com/119.28.28.28
server=/*.weixin.com/119.28.28.28
server=/*.bilibili.com/119.29.29.29
server=/hdslb.com/119.29.29.29
server=/*.163.com/119.29.29.29
server=/*.126.com/119.29.29.29
server=/*.126.net/119.29.29.29
server=/*.127.net/119.29.29.29
server=/*.netease.com/119.29.29.29
server=/*.mi.com/119.29.29.29
server=/*.xiaomi.com/119.29.29.29
address=/mtalk.google.com/108.177.125.188

[policy]
static=💬 MY, server-tag-regex=(到期)|(重置), img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/MY.png
static=🚀 节点选择, ♻️ 自动选择, 🇭🇰 香港,🇨🇳 台湾,🇯🇵 日本,🇸🇬 新加坡,🇺🇸 美国,🌏 其他, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Available.png
# 默认设置60分钟测速一次，当前使用节点延迟和最新测速延迟最低的节点相差200ms以上则切换为最新的最低延迟节点，否则继续延用节点
url-latency-benchmark=♻️ 自动选择, server-tag-regex=^((?!(到期|重置)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Auto.png
#static=🌏 亚洲主力, server-tag-regex=^.*(亚洲).*(主力)$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Global.png
url-latency-benchmark=🇭🇰 香港, server-tag-regex=(?=.*(港|粤|HK|(?i)Hong))^((?!(台湾|日本|新加坡|美国|韩国|狮城|南朝鲜|US|SG|JP|KR|TW|台灣|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Hong_Kong.png
url-latency-benchmark=🇭🇰 香港原生, server-tag-regex=(?=.*(港|粤|HK|(?i)Hong).*(原生|Netflix))^((?!(台湾|日本|新加坡|美国|韩国|狮城|南朝鲜|US|SG|JP|KR|TW|台灣|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Hong_Kong.png
url-latency-benchmark=🇨🇳 台湾, server-tag-regex=(?=.*(台湾|TW|(?i)Tai))^((?!(香港|日本|新加坡|美国|韩国|狮城|南朝鲜|US|SG|JP|KR|HK|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Taiwan.png
url-latency-benchmark=🇨🇳 台湾原生, server-tag-regex=(?=.*(台湾|TW|(?i)Tai).*(原生|Netflix))^((?!(香港|日本|新加坡|美国|韩国|狮城|南朝鲜|US|SG|JP|KR|HK|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Taiwan.png
url-latency-benchmark=🇸🇬 新加坡, server-tag-regex=(?=.*(新加坡|狮城|SG|(?i)Singapore))^((?!(香港|台湾|日本|美国|韩国|南朝鲜|US|JP|KR|HK|TW|台灣|美國|韓國)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Singapore.png
url-latency-benchmark=🇸🇬 新加坡原生, server-tag-regex=(?=.*(新加坡|狮城|SG|(?i)Singapore).*(原生|Netflix))^((?!(香港|台湾|日本|美国|韩国|南朝鲜|US|JP|KR|HK|TW|台灣|美國|韓國)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Singapore.png
url-latency-benchmark=🇯🇵 日本, server-tag-regex=(?=.*(日本|东京|大阪|JP|(?i)Japan))^((?!(香港|台湾|新加坡|美国|韩国|狮城|南朝鲜|US|SG|KR|HK|TW|台灣|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Japan.png
url-latency-benchmark=🇯🇵 日本原生, server-tag-regex=(?=.*(日本|东京|大阪|JP|(?i)Japan).*(原生|Netflix))^((?!(香港|台湾|新加坡|美国|韩国|狮城|南朝鲜|US|SG|KR|HK|TW|台灣|美國|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Japan.png
url-latency-benchmark=🇺🇸 美国, server-tag-regex=(?=.*(美国|美國|US|洛杉矶|西雅图|(?i)States|American))^((?!(香港|台湾|日本|新加坡|韩国|狮城|南朝鲜|SG|JP|KR|HK|TW|台灣|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/United_States.png
url-latency-benchmark=🇺🇸 美国原生, server-tag-regex=(?=.*(美国|美國|US|洛杉矶|西雅图|(?i)States|American).*(原生|Netflix))^((?!(香港|台湾|日本|新加坡|韩国|狮城|南朝鲜|SG|JP|KR|HK|TW|台灣|韓國|獅城)).)*$, check-interval=3600, tolerance=200, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/United_States.png
static=🌏 其他, server-tag-regex=^((?!(香港|粤|台湾|台灣|日本|东京|大阪|新加坡|狮城|獅城|美国|美國|SG|JP|HK|TW|US)).)*$, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Global.png
static=Telegram, 🚀 节点选择, 🇭🇰 香港,🇨🇳 台湾,🇸🇬 新加坡,🇯🇵 日本,🇺🇸 美国,🌏 其他, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Telegram.png
static=Speedtest, 🚀 节点选择, 🇭🇰 香港,🇨🇳 台湾,🇸🇬 新加坡,🇯🇵 日本,🇺🇸 美国,🇭🇰 香港原生,🇨🇳 台湾原生,🇸🇬 新加坡原生,🇯🇵 日本原生,🌏 其他, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Speedtest.png
static=🎮 Oculus, 🚀 节点选择, 🇭🇰 香港,🇨🇳 台湾,🇸🇬 新加坡,🇯🇵 日本,🇺🇸 美国,🌏 其他, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Facebook.png
static=📺 BiliBili, 🚀 节点选择, 📺 国外流媒体, 🇭🇰 香港原生,🇨🇳 台湾原生,🇸🇬 新加坡原生,🇯🇵 日本原生,🇺🇸 美国原生, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/bilibili.png
static=📺 Netflix, 🚀 节点选择, 📺 国外流媒体, 🇭🇰 香港原生,🇨🇳 台湾原生,🇸🇬 新加坡原生,🇯🇵 日本原生,🇺🇸 美国原生, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Netflix.png
static=📺 国外流媒体, 🚀 节点选择, 🇭🇰 香港,🇨🇳 台湾,🇯🇵 日本,🇸🇬 新加坡,🇺🇸 美国, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Streaming.png
static=🐟 漏网之鱼, 🚀 节点选择, ♻️ 自动选择, 🇭🇰 香港,🇨🇳 台湾,🇯🇵 日本,🇸🇬 新加坡,🇺🇸 美国,🌏 其他, PROXY, DIRECT, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Final.png

[server_remote]
# 节点远程订阅, 自行添
;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.txt, tag=Sample-01

[filter_remote]
# 自定义直连
https://raw.githubusercontent.com/angryz/InternetAccess/0/QuantumultX/filter/direct.list, tag=🎯 直连, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true
# Privacy 隐私
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Guard/Privacy.list, tag=🛑 隐私保护-拒绝, update-interval=172800, opt-parser=false, enabled=true
# Hijacking 运营商劫持或恶意网站
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Guard/Hijacking.list, tag=🛑 运营商劫持-拒绝, update-interval=172800, opt-parser=false, enabled=true
# Advertising 广告
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Guard/Advertising.list, tag=🛑 轻量广告拦截-拒绝, update-interval=172800, opt-parser=false, enabled=true
# China 国内网站
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/China.list, tag=🎯 国内网站-直连, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true
# ChinaIP 中国直连
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Extra/ChinaIP.list, tag=🎯 中国IP-直连, update-interval=172800, opt-parser=false , enabled=true

# Oculus
https://raw.githubusercontent.com/angryz/InternetAccess/0/QuantumultX/filter/oculus.list, tag=🚀 Oculus, force-policy=🎮 Oculus, update-interval=172800, opt-parser=false, enabled=true
# Netflix
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/StreamingMedia/Video/Netflix.list, tag=📺 Netflix, force-policy=📺 Netflix, update-interval=172800, opt-parser=false, enabled=true
# Bilibili
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/StreamingMedia/Video/bilibili.list, tag=📺 BiliBili, force-policy=📺 BiliBili, update-interval=172800, opt-parser=false, enabled=true
# Telegram
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Extra/Telegram/Telegram.list, tag=Telegram, force-policy=Telegram, update-interval=172800, opt-parser=false , enabled=true
# Speedtest
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Speedtest/Speedtest.list, tag=Speedtest, force-policy=Speedtest, update-interval=172800, opt-parser=false , enabled=true
#https://raw.githubusercontent.com/GoodHolidays/ConnersHua/master/Quantumult/X/Filter/Speedtest.list, tag=Speedtest, force-policy=Speedtest, update-interval=172800, opt-parser=false , enabled=true

# Unbreak 后续规则修正
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Unbreak.list, tag=🎯 规则修正-直连, update-interval=172800, opt-parser=false, enabled=true
# NobyDa大佬去广告 -默认关闭，自行手动启用！
#https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/AdRule.list, tag=🛑 重度广告拦截-拒绝, force-policy=reject, update-interval=172800, opt-parser=false, enabled=false
# Streaming 国际流媒体服务
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/StreamingMedia/Streaming.list, , tag=📺 国外流媒体, force-policy=📺 国外流媒体, update-interval=172800, opt-parser=false , enabled=true
# Global 全球加速
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Filter/Global.list, tag=🚀 节点选择, force-policy=🚀 节点选择, update-interval=172800, opt-parser=false , enabled=true

[rewrite_remote]
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/YouTubeAds.conf, tag=YouTube广告, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Block/Advertising.conf, tag=去广告, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/Wikiwand.conf, tag=Wikiwand, update-interval=172800, opt-parser=false, enabled=true
;https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.tf.conf, tag=Boxjs, update-interval=172800, opt-parser=false, enabled=true
;https://raw.githubusercontent.com/w37fhy/QuantumultX/master/QuantumultX_JS.conf, tag=比价等脚本, update-interval=172800, opt-parser=false, enabled=true
;https://raw.githubusercontent.com/w37fhy/QuantumultX/master/QuantumultX_Cookie.conf, tag=获取Cookie, update-interval=172800, opt-parser=false, enabled=true


[server_local]

[filter_local]
host-suffix, local, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 100.64.0.0/10, direct
ip-cidr, 224.0.0.0/4, direct
ip6-cidr, fe80::/10, direct
GEOIP,CN,DIRECT
FINAL,🐟 漏网之鱼

[rewrite_local]

[task_local]

[mitm]
